<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í™˜ê²½ í† ë¡  íˆ¬í‘œ ì˜ˆì¸¡ ê²Œì„</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .page {
            display: none;
        }
        .page.active {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            padding: 20px;
        }
        .btn-hover {
            transition: all 0.3s ease;
        }
        .btn-hover:hover {
            transform: scale(1.05);
        }
        .btn-hover:active {
            transform: scale(0.95);
            background-color: #1e40af;
        }
        .loading-spinner {
            border: 4px solid #f3f4f6;
            border-top: 4px solid #3b82f6;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
        }
        .modal.show {
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .card-shadow {
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
        }
    </style>
</head>
<body class="gradient-bg min-h-screen">
    <!-- Loading Spinner Overlay -->
    <div id="loadingOverlay" class="modal">
        <div class="bg-white p-8 rounded-xl text-center">
            <div class="loading-spinner"></div>
            <p class="text-gray-700 mt-4">ì œì¶œ ì¤‘ì…ë‹ˆë‹¤...</p>
        </div>
    </div>

    <!-- Success Modal -->
    <div id="successModal" class="modal">
        <div class="bg-white p-8 rounded-xl text-center max-w-md mx-4">
            <div class="text-green-500 text-6xl mb-4">âœ…</div>
            <h3 class="text-xl font-bold text-gray-800 mb-4" id="successMessage"></h3>
            <button onclick="handleSuccessConfirm()" class="bg-blue-500 hover:bg-blue-600 text-white px-6 py-2 rounded-lg btn-hover">í™•ì¸</button>
        </div>
    </div>

    <!-- Complete Modal -->
    <div id="completeModal" class="modal">
        <div class="bg-white p-8 rounded-xl text-center max-w-md mx-4">
            <div class="text-yellow-500 text-6xl mb-4">ğŸ‰</div>
            <h3 class="text-xl font-bold text-gray-800 mb-4">ëª¨ë“  ì…ë ¥ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!</h3>
            <button onclick="goToPage(1)" class="bg-blue-500 hover:bg-blue-600 text-white px-6 py-2 rounded-lg btn-hover">í™•ì¸</button>
        </div>
    </div>

    <!-- Page 1: ë‹¨ì²´ëª… ì…ë ¥ -->
    <div id="page1" class="page active">
        <div class="bg-white rounded-xl p-8 card-shadow max-w-md w-full">
            <div class="text-center mb-8">
                <h1 class="text-2xl font-bold text-gray-800 mb-2">ğŸŒ± í™˜ê²½ í† ë¡  íˆ¬í‘œ ì˜ˆì¸¡ ê²Œì„</h1>
                <h2 class="text-lg text-blue-600 mb-4">(ì—ë„ˆì§€ ì ˆì•½)</h2>
                <p class="text-gray-600 text-sm">Hostê°€ ì•Œë ¤ì¤€ ë‹¨ì²´ëª…ì„ ì…ë ¥í•©ë‹ˆë‹¤.<br>ëŒ€ì†Œë¬¸ì êµ¬ë¶„í•´ì„œ ì •í™•íˆ ì…ë ¥í•´ ì£¼ì„¸ìš”.</p>
            </div>
            
            <div class="mb-6">
                <label class="block text-gray-700 font-medium mb-2">ë‹¨ì²´ëª…</label>
                <input type="text" id="groupName" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="ë‹¨ì²´ëª…ì„ ì…ë ¥í•˜ì„¸ìš”">
            </div>
            
            <button onclick="nextPage(1)" class="w-full bg-blue-500 hover:bg-blue-600 text-white py-3 px-6 rounded-lg font-medium btn-hover">
                ë‹¤ìŒ â¡ï¸
            </button>
        </div>
    </div>

    <!-- Page 2: íŒ€ëª… ì„ íƒ -->
    <div id="page2" class="page">
        <div class="bg-white rounded-xl p-8 card-shadow max-w-md w-full">
            <div class="text-center mb-8">
                <h1 class="text-2xl font-bold text-gray-800 mb-2">ğŸŒ± í™˜ê²½ í† ë¡  íˆ¬í‘œ ì˜ˆì¸¡ ê²Œì„</h1>
                <h2 class="text-lg text-blue-600 mb-2">(ì—ë„ˆì§€ ì ˆì•½)</h2>
                <p class="text-gray-600 text-sm" id="groupNameDisplay1"></p>
            </div>
            
            <div class="mb-6">
                <label class="block text-gray-700 font-medium mb-2">íŒ€ëª… ì„ íƒ</label>
                <select id="teamName" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    <option value="">íŒ€ì„ ì„ íƒí•˜ì„¸ìš”</option>
                </select>
            </div>
            
            <div class="flex gap-3">
                <button onclick="goToPage(1)" class="flex-1 bg-gray-500 hover:bg-gray-600 text-white py-3 px-6 rounded-lg font-medium btn-hover">
                    â¬…ï¸ ë’¤ë¡œ ê°€ê¸°
                </button>
                <button onclick="nextPage(2)" class="flex-1 bg-blue-500 hover:bg-blue-600 text-white py-3 px-6 rounded-lg font-medium btn-hover">
                    ë‹¤ìŒ â¡ï¸
                </button>
            </div>
        </div>
    </div>

    <!-- Page 3: ë¼ìš´ë“œ ì„ íƒ -->
    <div id="page3" class="page">
        <div class="bg-white rounded-xl p-8 card-shadow max-w-md w-full">
            <div class="text-center mb-8">
                <h1 class="text-2xl font-bold text-gray-800 mb-2">ğŸŒ± í™˜ê²½ í† ë¡  íˆ¬í‘œ ì˜ˆì¸¡ ê²Œì„</h1>
                <h2 class="text-lg text-blue-600 mb-2">(ì—ë„ˆì§€ ì ˆì•½)</h2>
                <div class="text-gray-600 text-sm">
                    <p id="groupNameDisplay2"></p>
                    <p id="teamNameDisplay2"></p>
                </div>
            </div>
            
            <div class="mb-6">
                <label class="block text-gray-700 font-medium mb-2">ë¼ìš´ë“œ ì„ íƒ</label>
                <select id="roundName" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    <option value="">ë¼ìš´ë“œë¥¼ ì„ íƒí•˜ì„¸ìš”</option>
                </select>
            </div>
            
            <div class="flex gap-3">
                <button onclick="goToPage(2)" class="flex-1 bg-gray-500 hover:bg-gray-600 text-white py-3 px-6 rounded-lg font-medium btn-hover">
                    â¬…ï¸ ë’¤ë¡œ ê°€ê¸°
                </button>
                <button onclick="nextPage(3)" class="flex-1 bg-blue-500 hover:bg-blue-600 text-white py-3 px-6 rounded-lg font-medium btn-hover">
                    ë‹¤ìŒ â¡ï¸
                </button>
            </div>
        </div>
    </div>

    <!-- Page 4: ë‚˜ì˜ ì„ íƒ -->
    <div id="page4" class="page">
        <div class="bg-white rounded-xl p-8 card-shadow max-w-md w-full">
            <div class="text-center mb-8">
                <h1 class="text-2xl font-bold text-gray-800 mb-2">ğŸŒ± í™˜ê²½ í† ë¡  íˆ¬í‘œ ì˜ˆì¸¡ ê²Œì„</h1>
                <h2 class="text-lg text-blue-600 mb-2">(ì—ë„ˆì§€ ì ˆì•½)</h2>
                <div class="text-gray-600 text-sm">
                    <p id="groupNameDisplay3"></p>
                    <p id="teamNameDisplay3"></p>
                </div>
            </div>
            
            <div class="mb-6">
                <label class="block text-gray-700 font-medium mb-2">ë‚˜ì˜ ì„ íƒ</label>
                <select id="myChoice" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    <option value="">ì„ íƒí•˜ì„¸ìš”</option>
                    <option value="ì°¬ì„±(1ë²ˆ)">ì°¬ì„±(1ë²ˆ)</option>
                    <option value="ë°˜ëŒ€(2ë²ˆ)">ë°˜ëŒ€(2ë²ˆ)</option>
                </select>
            </div>
            
            <div class="flex gap-3">
                <button onclick="goToPage(3)" class="flex-1 bg-gray-500 hover:bg-gray-600 text-white py-3 px-6 rounded-lg font-medium btn-hover">
                    â¬…ï¸ ë’¤ë¡œ ê°€ê¸°
                </button>
                <button onclick="nextPage(4)" class="flex-1 bg-blue-500 hover:bg-blue-600 text-white py-3 px-6 rounded-lg font-medium btn-hover">
                    ë‹¤ìŒ â¡ï¸
                </button>
            </div>
        </div>
    </div>

    <!-- Page 5: ì˜ˆì¸¡ % -->
    <div id="page5" class="page">
        <div class="bg-white rounded-xl p-8 card-shadow max-w-md w-full">
            <div class="text-center mb-8">
                <h1 class="text-2xl font-bold text-gray-800 mb-2">ğŸŒ± í™˜ê²½ í† ë¡  íˆ¬í‘œ ì˜ˆì¸¡ ê²Œì„</h1>
                <h2 class="text-lg text-blue-600 mb-2">(ì—ë„ˆì§€ ì ˆì•½)</h2>
                <div class="text-gray-600 text-sm">
                    <p id="groupNameDisplay4"></p>
                    <p id="teamNameDisplay4"></p>
                </div>
            </div>
            
            <div class="mb-6">
                <label class="block text-gray-700 font-medium mb-2">ë‚˜ì˜ ì„ íƒê³¼ ê°™ì€ ì„ íƒì„ í•˜ëŠ” % ì˜ˆì¸¡</label>
                <select id="prediction" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    <option value="">ì˜ˆì¸¡ %ë¥¼ ì„ íƒí•˜ì„¸ìš”</option>
                </select>
            </div>
            
            <div class="flex gap-3">
                <button onclick="goToPage(4)" class="flex-1 bg-gray-500 hover:bg-gray-600 text-white py-3 px-6 rounded-lg font-medium btn-hover">
                    â¬…ï¸ ë’¤ë¡œ ê°€ê¸°
                </button>
                <button onclick="nextPage(5)" class="flex-1 bg-blue-500 hover:bg-blue-600 text-white py-3 px-6 rounded-lg font-medium btn-hover">
                    ë‹¤ìŒ â¡ï¸
                </button>
            </div>
        </div>
    </div>

    <!-- Page 6: ë² íŒ… ì„ íƒ -->
    <div id="page6" class="page">
        <div class="bg-white rounded-xl p-8 card-shadow max-w-md w-full">
            <div class="text-center mb-8">
                <h1 class="text-2xl font-bold text-gray-800 mb-2">ğŸŒ± í™˜ê²½ í† ë¡  íˆ¬í‘œ ì˜ˆì¸¡ ê²Œì„</h1>
                <h2 class="text-lg text-blue-600 mb-2">(ì—ë„ˆì§€ ì ˆì•½)</h2>
                <div class="text-gray-600 text-sm">
                    <p id="groupNameDisplay5"></p>
                    <p id="teamNameDisplay5"></p>
                </div>
            </div>
            
            <div class="mb-6">
                <label class="block text-gray-700 font-medium mb-2">ë² íŒ… ì„ íƒ</label>
                <select id="betting" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    <option value="">ë² íŒ…ì„ ì„ íƒí•˜ì„¸ìš”</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                    <option value="6">6</option>
                    <option value="7">7</option>
                    <option value="8">8</option>
                    <option value="9">9</option>
                </select>
            </div>
            
            <div class="flex gap-3 mb-4">
                <button onclick="goToPage(5)" class="flex-1 bg-gray-500 hover:bg-gray-600 text-white py-3 px-6 rounded-lg font-medium btn-hover">
                    â¬…ï¸ ë’¤ë¡œ ê°€ê¸°
                </button>
            </div>
            
            <button onclick="submitData()" id="submitBtn" class="w-full bg-green-500 hover:bg-green-600 text-white py-3 px-6 rounded-lg font-medium btn-hover">
                ğŸ“¤ ì œì¶œí•˜ê¸°
            </button>
        </div>
    </div>

    <script>
        let gameData = {
            groupName: '',
            teamName: '',
            roundName: '',
            myChoice: '',
            prediction: '',
            betting: ''
        };
        
        let isSubmitting = false;

        // ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', function() {
            initializeSelects();
        });

        function initializeSelects() {
            // íŒ€ëª… ë“œë¡­ë‹¤ìš´ ì´ˆê¸°í™”
            const teamSelect = document.getElementById('teamName');
            for (let i = 1; i <= 60; i++) {
                const option = document.createElement('option');
                option.value = `${i}íŒ€`;
                option.textContent = `${i}íŒ€`;
                teamSelect.appendChild(option);
            }

            // ë¼ìš´ë“œ ë“œë¡­ë‹¤ìš´ ì´ˆê¸°í™”
            const roundSelect = document.getElementById('roundName');
            for (let i = 1; i <= 10; i++) {
                const option = document.createElement('option');
                option.value = `${i}ë¼ìš´ë“œ`;
                option.textContent = `${i}ë¼ìš´ë“œ`;
                roundSelect.appendChild(option);
            }

            // ì˜ˆì¸¡ % ë“œë¡­ë‹¤ìš´ ì´ˆê¸°í™”
            const predictionSelect = document.getElementById('prediction');
            const percentages = [2,5,10,15,20,25,30,35,40,45,50,55,60,65,70,75,80,85,90,95,98];
            percentages.forEach(percent => {
                const option = document.createElement('option');
                option.value = `${percent}%`;
                option.textContent = `${percent}%`;
                predictionSelect.appendChild(option);
            });
        }

        function goToPage(pageNum) {
            document.querySelectorAll('.page').forEach(page => page.classList.remove('active'));
            document.getElementById(`page${pageNum}`).classList.add('active');
            
            if (pageNum === 3) {
                updateDisplays();
            }
        }

        function nextPage(currentPage) {
            if (currentPage === 1) {
                const groupName = document.getElementById('groupName').value.trim();
                if (!groupName) {
                    alert('ë‹¨ì²´ëª…ì„ ì…ë ¥í•´ ì£¼ì„¸ìš”.');
                    return;
                }
                gameData.groupName = groupName;
                updateDisplays();
                goToPage(2);
            } else if (currentPage === 2) {
                const teamName = document.getElementById('teamName').value;
                if (!teamName) {
                    alert('íŒ€ëª…ì„ ì„ íƒí•´ ì£¼ì„¸ìš”.');
                    return;
                }
                gameData.teamName = teamName;
                updateDisplays();
                goToPage(3);
            } else if (currentPage === 3) {
                const roundName = document.getElementById('roundName').value;
                if (!roundName) {
                    alert('ë¼ìš´ë“œë¥¼ ì„ íƒí•´ ì£¼ì„¸ìš”.');
                    return;
                }
                gameData.roundName = roundName;
                updateDisplays();
                goToPage(4);
            } else if (currentPage === 4) {
                const myChoice = document.getElementById('myChoice').value;
                if (!myChoice) {
                    alert('ë‚˜ì˜ ì„ íƒì„ í•´ì£¼ì„¸ìš”.');
                    return;
                }
                gameData.myChoice = myChoice;
                updateDisplays();
                goToPage(5);
            } else if (currentPage === 5) {
                const prediction = document.getElementById('prediction').value;
                if (!prediction) {
                    alert('ì˜ˆì¸¡ %ë¥¼ ì„ íƒí•´ ì£¼ì„¸ìš”.');
                    return;
                }
                gameData.prediction = prediction;
                updateDisplays();
                goToPage(6);
            }
        }

        function updateDisplays() {
            // ëª¨ë“  í˜ì´ì§€ì˜ ë””ìŠ¤í”Œë ˆì´ ì—…ë°ì´íŠ¸
            document.getElementById('groupNameDisplay1').textContent = `ë‹¨ì²´ëª…: ${gameData.groupName}`;
            document.getElementById('groupNameDisplay2').textContent = `ë‹¨ì²´ëª…: ${gameData.groupName}`;
            document.getElementById('teamNameDisplay2').textContent = `íŒ€ëª…: ${gameData.teamName}`;
            document.getElementById('groupNameDisplay3').textContent = `ë‹¨ì²´ëª…: ${gameData.groupName}`;
            document.getElementById('teamNameDisplay3').textContent = `íŒ€ëª…: ${gameData.teamName}`;
            document.getElementById('groupNameDisplay4').textContent = `ë‹¨ì²´ëª…: ${gameData.groupName}`;
            document.getElementById('teamNameDisplay4').textContent = `íŒ€ëª…: ${gameData.teamName}`;
            document.getElementById('groupNameDisplay5').textContent = `ë‹¨ì²´ëª…: ${gameData.groupName}`;
            document.getElementById('teamNameDisplay5').textContent = `íŒ€ëª…: ${gameData.teamName}`;
        }

        async function submitData() {
            if (isSubmitting) {
                return;
            }

            // ë² íŒ… ì„ íƒ í™•ì¸
            const betting = document.getElementById('betting').value;
            if (!betting) {
                alert('ë² íŒ…ì„ ì„ íƒí•´ ì£¼ì„¸ìš”.');
                return;
            }
            gameData.betting = betting;

            isSubmitting = true;
            document.getElementById('submitBtn').disabled = true;
            document.getElementById('loadingOverlay').classList.add('show');

            try {
                const response = await fetch('https://script.google.com/macros/s/AKfycbxTq6KXyeg8Mcfgaqb6JOHEfAe5iYv0Z7VJMmfPN9pbT2kb9JlKQ8TWBy_hq1b9sKj-/exec', {
                    method: 'POST',
                    mode: 'no-cors',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(gameData)
                });
                
                // no-cors ëª¨ë“œì—ì„œëŠ” í•­ìƒ catchë¡œ ë„˜ì–´ê°
                throw new Error('ì…ë ¥ì´ ì„±ê³µí–ˆìŠµë‹ˆë‹¤');
                
            } catch (error) {
                document.getElementById('loadingOverlay').classList.remove('show');
                
                if (error.message === 'ì…ë ¥ì´ ì„±ê³µí–ˆìŠµë‹ˆë‹¤') {
                    showSuccessModal();
                } else {
                    alert('ì œì¶œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ ì£¼ì„¸ìš”.');
                }
            } finally {
                setTimeout(() => {
                    isSubmitting = false;
                    document.getElementById('submitBtn').disabled = false;
                }, 3000);
            }
        }

        function showSuccessModal() {
            const message = `${gameData.groupName}, ${gameData.teamName}, ${gameData.roundName} ë‚´ìš©ì´ ì˜ ì…ë ¥ëìŠµë‹ˆë‹¤.`;
            document.getElementById('successMessage').textContent = message;
            document.getElementById('successModal').classList.add('show');
        }

        function handleSuccessConfirm() {
            document.getElementById('successModal').classList.remove('show');
            
            // í˜„ì¬ ë¼ìš´ë“œ ë²ˆí˜¸ ì¶”ì¶œ
            const currentRoundNum = parseInt(gameData.roundName.replace('ë¼ìš´ë“œ', ''));
            
            if (currentRoundNum >= 10) {
                // ë§ˆì§€ë§‰ ë¼ìš´ë“œë©´ ì™„ë£Œ ëª¨ë‹¬ í‘œì‹œ
                document.getElementById('completeModal').classList.add('show');
            } else {
                // ë‹¤ìŒ ë¼ìš´ë“œë¡œ ì„¤ì •í•˜ê³  3í˜ì´ì§€ë¡œ ì´ë™
                const nextRound = `${currentRoundNum + 1}ë¼ìš´ë“œ`;
                document.getElementById('roundName').value = nextRound;
                gameData.roundName = nextRound;
                
                // ì…ë ¥ í•„ë“œë“¤ ì´ˆê¸°í™”
                document.getElementById('myChoice').value = '';
                document.getElementById('prediction').value = '';
                document.getElementById('betting').value = '';
                gameData.myChoice = '';
                gameData.prediction = '';
                gameData.betting = '';
                
                goToPage(3);
            }
        }

        // ëª¨ë‹¬ ë‹«ê¸° (ë°°ê²½ í´ë¦­)
        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('modal')) {
                e.target.classList.remove('show');
            }
        });
    </script>
</body>
</html>
